var Cardgame={cards:[],playerHand:[],AIHand:[],init:function(){this.cacheDom(),this.bindEvents(),this.createDeck(),this.shuffleDeck(),this.renderDeck()},cacheDom:function(){this.$deck=$("#deck"),this.$btnDeal=$("#btn-deal"),this.$playerPane=$("#player-pane"),this.$AIPane=$("#ai-pane"),this.$cardSlots=$(".card-slots")},bindEvents:function(){var t=this;this.$btnDeal.on("click",function(){t.dealCards("both")}),$("#player-pane .card-slot").on("click",t.selectCard)},createDeck:function(){for(var t=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],a=["Hearts","Diamonds","Spades","Clubs"],e=0;e<t.length;e++)for(var s=0;s<a.length;s++){var i=(t[e]+"_of_"+a[s]+".png").toLowerCase();this.cards.push({rank:t[e],suit:a[s],img:i})}},shuffleDeck:function(){for(var t=[],a,e=this.cards.length;e>0;e--)a=Math.floor(Math.random()*e),t.push(this.cards[a]),this.cards.splice(a,1);this.cards=t},renderDeck:function(){for(var t="",a="",e,s=this.cards.length-1;s>=0;s--)e=(this.cards.length-s)/4,a=this.cards[s].suit.toLowerCase()+"-"+this.cards[s].rank.toLowerCase(),t+='<div class="card" style="top: '+e+"px; left: "+e+"px; z-index: "+s+'">',t+='<figure class="back"></figure>',t+='<figure class="front '+a+'"></figure>',t+="</div>";this.$deck.append(t)},dealCards:function(){var t=this,a=t.getEmptySlots().length,e=[0,5,1,6,2,7,3,8,4,9],s=t.$deck.children().slice(0,a);if(10===a)for(var i=0;i<e.length;i++){var n=$("#slot-"+e[i]),r=$(s[i]);t.animateCard(r,n,i,a)}else this.getEmptySlots().each(function(e){var i=$(this),n=$(s[e]);t.animateCard(n,i,e,a)})},animateCard:function(t,a,e,s){var i=this,n=200,r=a.offset().top-this.$deck.offset().top+5,c=a.offset().left-this.$deck.offset().left+5;setTimeout(function(){t.addClass("rotate").animate({top:r,left:c},n,function(){t.remove().appendTo("#"+a.attr("id")).css({position:"static","z-index":e}).removeClass("rotate"),e===s-1&&i.flipPlayerCards()})},(n+100)*e)},flipPlayerCards:function(){var t=$(".card-slot"),a=100;t.each(function(t){if(t<5){var e=$(this);setTimeout(function(){e.children("div").addClass("face-up")},a*t)}})},selectCard:function(){var t=$(this);console.log($(this)),t.hasClass("selected-card")?t.stop().animate({marginTop:0,opacity:1},200):t.stop().animate({marginTop:-10,opacity:.5},50),t.toggleClass("selected-card")},getEmptySlots:function(){return $(".card-slot:not(:has(div))")},changeInstruction:function(t){$(".instruction").text(t)}};Cardgame.init();